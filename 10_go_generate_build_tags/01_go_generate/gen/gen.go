package main

import (
	"bytes"
	"io/ioutil"
	"log"
	"os"
	"text/template"
)

//go:generate go run gen.go

var tmp = `// Code generated by gen.go DO NOT EDIT.

package main

type {{.Type}} struct {} 

func (v *{{.Type}}) GetPrice(string) int {
    return 100
}
`

func main() {
	t, err := template.New("").Parse(tmp)
	if err != nil {
		log.Fatal(err)
	}

	b := &bytes.Buffer{}

	t.Execute(b, struct {
		Type string
	}{
		Type: os.Getenv("TYPE"),
	})

	err = ioutil.WriteFile(os.Getenv("OUTPUT"), b.Bytes(), 0644)
	if err != nil {
		log.Fatal(err)
	}
}
